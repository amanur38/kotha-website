<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/contact-us.css">
    <title>Kotha</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <nav class="flex justify-between lg:px-64  px-5 py-5">
        <div class="logo lg:ml-36">
            <a href="/">
                <img src="images/Layer 29 copy.png" alt="Kotha Image" class="w-20 h-28 rounded-md">
            </a>
        </div>
        <div class="nav-buttons flex space-x-3">
            <a href="/getkotha.html">DOWNLOAD</a>
            <a href="/about-us.html">ABOUT</a>
            <a href="/help.html">FAQ</a>
            <a href="/contact-us.html">Contact Us</a>
        </div>
    </nav>


    <!-- <main class="container mx-auto lg:px-52 lg:py-10 px-5 py-5"> -->
    <section class="container lg:px-52 lg:py-10 px-5 py-5">
        <div id="min-height-page"  class="col-md-12 aboutp flex flex-col lg:flex-row items-center lg:items-start">

            <div class="w-full lg:hidden">
                <img src="images/contact-us-mobile.png" alt="About Kotha" class="w-full h-auto rounded-lg">
            </div>
        
            <!-- Left Side (Image) -->
            <div class="w-full lg:w-2/5 mb-1 lg:mb-0 hidden lg:block">
                <img src="images/contact-us.png" alt="About Kotha" class="w-full h-auto rounded-lg">
            </div>

            <!-- Right Side (Text) -->
            <div class="w-full lg:w-3/5 lg:pl-10 bg-white  rounded-lg p-4 lg:p-0">
                <h2 class="text-3xl lg:text-4xl font-bold text-gray-700 mb-6">Contact Us</h2>
                <form name="myForm" class="space-y-6" onsubmit="return handleSubmit(event)">
                    <!-- Name Section -->
                    <!-- <div>
                        <label class="block mb-2">Name</label>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="flex flex-col">
                                <input type="text" name="nameTitle" class="w-full p-2 border rounded mb-1">
                                <label class="text-gray-600 text-sm mt-1">Mr/Mrs/Ms</label>
                            </div>
                            <div class="flex flex-col">
                                <input type="text" name="fname" class="w-full p-2 border rounded mb-1">
                                <label class="text-gray-600 text-sm mt-1">First Name</label>
                            </div>
                            <div class="flex flex-col">
                                <input type="text" name="lname" class="w-full p-2 border rounded mb-1">
                                <label class="text-gray-600 text-sm mt-1">Last Name</label>
                            </div>
                        </div>
                    </div> -->

                    <!-- Email and Phone -->
                    <div class="grid grid-cols-2 gap-4 mt-8">
                        <div>
                            <label class="block mb-2">E-mail</label>
                            <input type="email" name="email" placeholder="Email" class="w-full p-2 border rounded">
                        </div>
                        <div>
                            <label class="block mb-2">Phone</label>
                            <input type="tel" name="phone" class="w-full p-2 border rounded"
                                placeholder="Phone Number (01XXXXXXXXX)">
                        </div>
                    </div>

                    <!-- Address -->
                    <div class="mt-6">
                        <label class="block mb-2">Subject</label>
                        <input type="text" name="subject" placeholder="Subject" class="w-full p-2 border rounded mb-1">
                    </div>

                    <!-- <div>
                        <input type="text" name="address2" class="w-full p-2 border rounded mb-1">
                        <label class="block text-gray-600 text-sm mt-1">Street Address Line 2</label>
                    </div> -->

                    <!-- City and State -->
                    <!-- <div class="grid grid-cols-2 gap-4">
                        <div>
                            <input type="text" name="city" class="w-full p-2 border rounded mb-1">
                            <label class="block text-gray-600 text-sm mt-1">City</label>
                        </div>
                        <div>
                            <input type="text" name="state" class="w-full p-2 border rounded mb-1">
                            <label class="block text-gray-600 text-sm mt-1">State</label>
                        </div>
                    </div> -->

                    <!-- Postal/Zip Code -->
                    <!-- <div>
                        <input type="text" name="postalCode" class="w-full p-2 border rounded mb-1">
                        <label class="block text-gray-600 text-sm mt-1">Postal/Zip Code</label>
                    </div> -->

                    <!-- Comment, Question, Suggestion -->
                    <div class="mt-6">
                        <label class="block text-gray-700 mb-2">Comment, Question, or Suggestion</label>
                        <textarea name="comment" placeholder="Text..." class="w-full p-2 border rounded"
                            rows="4"></textarea>
                    </div>

                    <!-- Submit Button -->
                    <div class="m-auto mt-8 flex justify-center">
                        <button type="submit" id="submit_button"
                            class="w-36 bg-[#6CA400] text-white py-2 rounded hover:bg-[#6CA400] transition">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- </main> -->



    <footer class="bg-[#6CA400] w-full h-52">
        <div class="container mx-auto h-full">
            <div class="flex flex-col items-center justify-between h-full py-16">
                <!-- Logo Section - Top -->
                <div class="logo">
                    <img src="images/Layer 29 copy.png" alt="Kotha Image" class="w-16 h-20">
                </div>

                <!-- Copyright and Links Section - Bottom -->
                <div class="flex flex-col md:flex-row items-center gap-2 md:gap-4 text-center">
                    <!-- Copyright Text -->
                    <div class="flex flex-col md:flex-row gap-2 md:gap-4 text-sm md:text-base">
                        <p>2023. Kotha Apps & Technologies Ltd.</p>
                        <p class="hidden md:block">Copyright, Kotha Apps & Technologies Ltd.</p>
                    </div>

                    <!-- Links -->
                    <div class="text-sm md:text-base flex flex-wrap justify-center gap-5 md:gap-0 space-x-1">
                        <a href="/policy.html" target="_blank" class="hover:text-gray-300">Terms & Policy</a>
                        <span class="hidden md:inline">|</span>
                        <a href="/community-policy.html" target="_blank" class="hover:text-gray-300">Community
                            Policy</a>
                        <span class="hidden md:inline">|</span>
                        <a href="/policy.html#PrivacyPolicy" target="_blank" class="hover:text-gray-300">Privacy
                            Policy</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // const submitButton = document.getElementById('submit_button');
        const apiUrl = `http://api-email.dhakaflow.com/send-email`;
        // let x = document.forms["myForm"]["fname"].value;


        const handleSubmit = (event) => {
            event.preventDefault();
            const form = event.target;
            const inputs = form.querySelectorAll('input, textarea');

            // Get individual name fields
            // const nameTitle = form.elements['nameTitle']?.value?.trim() || '';
            // const fname = form.elements['fname']?.value?.trim() || '';
            // const lname = form.elements['lname']?.value?.trim() || '';

            // Combine into one "name"
            // const name = [nameTitle, fname, lname].filter(Boolean).join(' ');


            const values = {};
            inputs.forEach(input => {
                values[input.name] = input.value;
            });

            const reuquestOptions = {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(values),
            }


            // required input field
            let valid = true;
            form.querySelectorAll('.error-message').forEach(el => el.remove());
            const requiredFields = [
                // form.elements['nameTitle'],
                // form.elements['fname'],
                // form.elements['lname'],
                form.elements['email'],
                form.elements['comment']
            ];

            requiredFields.forEach(input => {
                if (!input.value.trim()) {
                    valid = false;
                    input.classList.add('border-red-500');
                    // Show error message if not already present
                    if (!input.parentNode.querySelector('.error-message')) {
                        const error = document.createElement('span');
                        error.className = 'error-message text-red-500 text-xs';
                        error.innerText = 'required this field';
                        input.parentNode.appendChild(error);
                    }
                } else {
                    input.classList.remove('border-red-500');
                }
            });
            if (!valid) {
                return false;
            }

            console.log('requestOption', reuquestOptions)

            fetch(apiUrl, reuquestOptions)
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    form.reset();
                    // Remove error styles/messages if any
                    form.querySelectorAll('.border-red-500').forEach(el => el.classList.remove('border-red-500'));
                    form.querySelectorAll('.error-message').forEach(el => el.remove());

                    // popup box
                    let popup = document.createElement('div');
                    popup.innerText = 'Message sent successfully';
                    popup.style.position = 'fixed';
                    popup.style.top = '50%';
                    popup.style.left = '50%';
                    popup.style.transform = 'translate(-50%, -50%)';
                    popup.style.background = '#6CA400';
                    popup.style.color = '#fff';
                    popup.style.padding = '20px 20px 20px 20px';
                    popup.style.borderRadius = '8px';
                    popup.style.boxShadow = '0 2px 16px rgba(0,0,0,0.2)';
                    popup.style.zIndex = '9999';
                    popup.style.textAlign = 'center';


                    document.body.appendChild(popup);

                    setTimeout(() => {
                        popup.remove();
                    }, 3000);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

    </script>
</body>

</html>